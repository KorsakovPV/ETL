# –ü—Ä–æ–µ–∫—Ç–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ: ETL

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –º–æ–¥—É–ª–µ –≤—ã —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞. –¢–µ–ø–µ—Ä—å —É–ª—É—á—à–∏–º –µ–≥–æ: –Ω–∞—É—á–∏–º –µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## –ü–æ–¥—Å–∫–∞–∑–∫–∏

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –≤—ã –ø—Ä–∏—Å—Ç—É–ø–∏—Ç–µ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–¥–∞–Ω–∏—è, –¥–∞–¥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–æ–∫:

1. –ü—Ä–µ–∂–¥–µ —á–µ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏–µ, –ø–æ–¥—É–º–∞–π—Ç–µ, —Å–∫–æ–ª—å–∫–æ ETL-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–∞–º –Ω—É–∂–Ω–æ.
2. –î–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞ —Å–æ–≤–µ—Ç—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pydantic.
3. –î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è ETL-–ø—Ä–æ—Ü–µ—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä—É—Ç–∏–Ω—ã.
4. –ß—Ç–æ–±—ã —Å–ø–æ–∫–æ–π–Ω–æ –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å –ø–∞–¥–µ–Ω–∏—è Postgres –∏–ª–∏ Elasticsearch, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏–µ —Å —Ç–µ—Ö–Ω–∏–∫–æ–π `backoff` –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.
5. –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–º–µ—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –Ω–∞—á–∏–Ω–∞—Ç—å —á–∏—Ç–∞—Ç—å —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –æ–Ω–æ –∑–∞–∫–æ–Ω—á–∏–ª–æ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É.
6. –ü—Ä–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ ETL-–ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–¥—É–º–∞–π—Ç–µ, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –≤ –∫–æ–¥–µ –∫–∞–∫ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ ¬´–º–∞–≥–∏—á–µ—Å–∫–∏—Ö¬ª –∑–Ω–∞—á–µ–Ω–∏–π.
7. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–±–æ–±—â—ë–Ω–Ω—ã–º, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥. –ü—Ä–∏ –æ–±–æ–±—â–µ–Ω–∏–∏ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–æ–ª–∂–Ω—ã —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è.
8. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–π–ø–∏–Ω–≥–æ–≤ –ø–æ–º–æ–∂–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –¥–µ–±–∞–≥–∞ –∏ –ø–æ–≤—ã—Å–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–¥–∞ —Ä–µ–≤—å—é–µ—Ä–∞–º–∏, –∞ –∑–Ω–∞—á–∏—Ç —Ä–∞–±–æ—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ :)
9. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–∏—à–∏—Ç–µ, —á—Ç–æ –¥–µ–ª–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–¥–µ.
10. –î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª—å `logging` –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python.

–ñ–µ–ª–∞–µ–º –≤–∞–º —É–¥–∞—á–∏ –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ ETL! –í—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–∞–≤–∏—Ç–µ—Å—å üí™ 

**–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∑–∞–ª–µ–π—Ç–µ –≤ –ø–∞–ø–∫—É `postgres_to_es` –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.**

## –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1.  –° –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç

        git clone https://github.com/KorsakovPV/ETL
    
    –í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –Ω–∞—Ö–æ–¥–∏–º —Ñ–∞–π–ª .env.sample. –≠—Ç–æ —à–∞–±–ª–æ–Ω —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ü–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ —Å–≤–æ–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.


2. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

        docker-compose up -d --build

3. —Å–æ–∑–¥–∞–µ–º –±–∞–∑—É 

        docker-compose exec db psql -U postgres -c 'CREATE DATABASE movies3;'

5. –ù–∞–∫–∞—Ç—ã–≤–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏:

        docker-compose exec admin_panel python manage.py migrate

6. –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

        docker-compose exec admin_panel python manage.py createsuperuser

7. –î–æ–±–∞–≤–ª—è–µ–º –≤ –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–π–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

        docker-compose exec admin_panel python manage.py generating_data

8. –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏–∫—É:

        docker-compose exec admin_panel python manage.py collectstatic

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π: **[Django](https://www.djangoproject.com/)**, **[Python](https://www.python.org/)**, **[PostgreSQL](https://www.postgresql.org/)**, **[NGINX](https://nginx.org/)**, **[Docker](https://www.docker.com/)**, **[Docker-Compose](https://docs.docker.com/compose/)**, **[GitHub](https://github.com)**, –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –≤ IDE **[PyCharm](https://www.jetbrains.com/pycharm/)**, **[OS Linux Mint](https://linuxmint.com/)**